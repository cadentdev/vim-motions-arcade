#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# E2E tests as deployment gate
# Note: E2E tests run in GitHub Actions CI
# For local testing, ensure Playwright browsers are installed:
# npx playwright install --with-deps chromium

echo "Pre-push hook: Running E2E tests..."
npm run test:e2e

if [ $? -ne 0 ]; then
  echo "❌ E2E tests failed. Push blocked."
  echo "Fix the failing tests or run 'git push --no-verify' to skip (not recommended)"
  exit 1
fi

echo "✅ E2E tests passed!"
